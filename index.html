<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Temporizador del Rat贸n</title>

<style>
  body {
    background:#fff7d1;
    color:#333;
    font-family:Comic Sans MS, Arial;
    text-align:center;
    padding:20px;
  }

  h1 {
    font-size:40px;
    color:#ff9900;
    text-shadow:2px 2px #fff;
  }

  .buttons {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:15px;
    margin:20px 0;
  }

  .buttons button {
    background:#ffe066;
    border:3px solid #ffcc00;
    padding:15px 25px;
    font-size:22px;
    border-radius:15px;
    cursor:pointer;
    font-weight:bold;
    box-shadow:3px 3px #d4b100;
  }

  .buttons button:hover {
    background:#ffdd66;
  }

  #manual {
    margin-top:20px;
    font-size:20px;
    padding:10px;
    width:120px;
    border-radius:10px;
    border:2px solid #ffcc00;
  }

  #mouse {
    font-size:80px;
    margin:20px;
    animation: mover 1s infinite alternate;
    position:relative;
  }

  @keyframes mover {
    from { transform:translateX(-10px); }
    to   { transform:translateX(10px); }
  }

  #cheese {
    font-size:50px;
    margin:20px;
    letter-spacing:10px;
    min-height:80px;
  }

  #countdown {
    font-size:30px;
    margin-top:20px;
    color:#cc6600;
  }

  .explosion {
    position:absolute;
    animation: fly 1s ease-out forwards;
  }

  @keyframes fly {
    from { transform:translate(0,0) scale(1); opacity:1; }
    to { transform:translate(var(--x), var(--y)) scale(0.5); opacity:0; }
  }

  #house {
    font-size:80px;
    margin-top:30px;
    display:none;
  }
</style>
</head>

<body>

<h1> Temporizador del Rat贸n </h1>

<p style="font-size:22px;">Elige un tiempo:</p>

<div class="buttons">
  <button onclick="startTimer(5)">5 min</button>
  <button onclick="startTimer(10)">10 min</button>
  <button onclick="startTimer(15)">15 min</button>
  <button onclick="startTimer(20)">20 min</button>
  <button onclick="startTimer(25)">25 min</button>
  <button onclick="startTimer(30)">30 min</button>
  <button onclick="startTimer(45)">45 min</button>
  <button onclick="startTimer(60)">60 min</button>
</div>

<p style="font-size:20px;">O escribe tus minutos:</p>
<input id="manual" type="number" min="1" placeholder="Minutos">
<button onclick="manualStart()">Iniciar</button>

<div id="mouse"></div>

<div id="cheese"></div>

<div id="countdown"></div>

<div id="house"></div>

<script>
let interval;

function manualStart() {
  let m = parseInt(document.getElementById("manual").value);
  if (m > 0) startTimer(m);
}

function startTimer(minutes) {
  clearInterval(interval);

  document.getElementById("house").style.display = "none";

  let totalSeconds = minutes * 60;
  let remaining = totalSeconds;

  let slices = minutes * 6; // 6 trozos por minuto
  let sliceTime = totalSeconds / slices;

  let cheeseDiv = document.getElementById("cheese");
  cheeseDiv.innerHTML = "".repeat(slices);

  interval = setInterval(() => {
    remaining--;

    let m = Math.floor(remaining / 60);
    let s = remaining % 60;
    document.getElementById("countdown").innerText =
      m + "m " + (s < 10 ? "0" + s : s) + "s";

    let eaten = Math.floor((totalSeconds - remaining) / sliceTime);
    let left = slices - eaten;
    if (left < 0) left = 0;

    cheeseDiv.innerHTML = "".repeat(left);

    if (remaining <= 0) {
      clearInterval(interval);
      finishAnimation();
    }
  }, 1000);
}

function finishAnimation() {
  let cheeseDiv = document.getElementById("cheese");
  cheeseDiv.innerHTML = "";

  for (let i = 0; i < 12; i++) {
    let piece = document.createElement("div");
    piece.className = "explosion";
    piece.style.left = "50%";
    piece.style.top = "50%";
    piece.style.setProperty("--x", (Math.random()*400-200)+"px");
    piece.style.setProperty("--y", (Math.random()*400-200)+"px");
    piece.innerText = "";
    document.body.appendChild(piece);

    setTimeout(() => piece.remove(), 1000);
  }

  setTimeout(() => {
    document.getElementById("house").style.display = "block";
    document.getElementById("mouse").innerText = "★";
  }, 1000);

  document.getElementById("countdown").innerText =
    "隆El rat贸n se comi贸 todo el queso!";
}
</script>

</body>
</html>
